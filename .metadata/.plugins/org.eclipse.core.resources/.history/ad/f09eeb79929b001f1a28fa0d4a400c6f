package com.zerock.controller;

import java.util.List;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.zerock.dto.BoardVO;
import com.zerock.mapper.BoardMapper;

public class BoardApp {

    public static void main(String[] args) {
        // Spring ApplicationContext를 로드하여 Bean들을 관리
        ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");

        // MyBatis SqlSessionFactory Bean 가져오기
        SqlSessionFactory sqlSessionFactory = (SqlSessionFactory) context.getBean("sqlSessionFactory");

        // SqlSession 생성 (MyBatis를 통해 DB와 연결)
        try (SqlSession session = sqlSessionFactory.openSession()) {
            // BoardMapper를 가져오기
            BoardMapper boardMapper = session.getMapper(BoardMapper.class);

            // BoardMapper의 getList 메서드를 호출하여 DB에서 데이터 조회
            List<BoardVO> boardList = boardMapper.getList();

            // 조회한 데이터를 출력
            for (BoardVO board : boardList) {
                System.out.println(board);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
